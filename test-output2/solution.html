<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solution Map - Room 24962</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: #f5f5f5;
            color: #333;
        }
        .header {
            background: linear-gradient(135deg, #1a237e 0%, #283593 100%);
            color: white;
            padding: 12px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        .header-left {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .header h1 {
            font-size: 18px;
            font-weight: 500;
            margin: 0;
        }
        .header .subtitle {
            opacity: 0.8;
            font-size: 14px;
            margin: 0;
        }
        .stats {
            display: flex;
            gap: 15px;
            margin: 0;
        }
        .stat {
            background: rgba(255,255,255,0.15);
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 12px;
        }
        .tabs {
            background: white;
            display: flex;
            border-bottom: 1px solid #e0e0e0;
            padding: 0 20px;
        }
        .tab {
            padding: 15px 25px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            font-weight: 500;
            color: #666;
            transition: all 0.2s;
        }
        .tab:hover {
            color: #1a237e;
        }
        .tab.active {
            color: #1a237e;
            border-bottom-color: #1a237e;
        }
        .content {
            display: none;
            height: calc(100vh - 105px);
            overflow: auto;
        }
        .content.active {
            display: block;
        }
        .graph-container {
            display: flex;
            height: calc(100% - 49px);
        }
        .graph-panel {
            width: 0;
            min-width: 0;
            background: white;
            border-right: 1px solid #e0e0e0;
            overflow: hidden;
            transition: width 0.2s ease, min-width 0.2s ease;
        }
        .graph-panel.active {
            width: 300px;
            min-width: 300px;
        }
        .panel-header {
            padding: 12px 15px;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #f8f9fa;
        }
        .panel-header h3 {
            margin: 0;
            font-size: 14px;
            font-weight: 600;
            color: #1a237e;
        }
        .panel-close {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: #666;
            padding: 0 5px;
        }
        .panel-close:hover {
            color: #333;
        }
        .panel-body {
            padding: 15px;
            overflow-y: auto;
            height: calc(100% - 50px);
        }
        .panel-section {
            margin-bottom: 20px;
        }
        .panel-section + .panel-section {
            border-top: 2px solid #e0e0e0;
            padding-top: 20px;
            margin-top: 20px;
        }
        .panel-section h4 {
            font-size: 12px;
            text-transform: uppercase;
            color: #666;
            margin: 0 0 10px 0;
        }
        .panel-subsection {
            margin-bottom: 15px;
            padding: 10px;
            border-radius: 6px;
        }
        .panel-subsection.actions {
            background: #fff8e1;
            border-left: 3px solid #ff9800;
        }
        .panel-subsection.fields {
            background: #e3f2fd;
            border-left: 3px solid #2196f3;
        }
        .panel-subsection h5 {
            font-size: 11px;
            font-weight: 700;
            margin: 0 0 10px 0;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .panel-subsection.actions h5 {
            color: #e65100;
        }
        .panel-subsection.fields h5 {
            color: #1565c0;
        }
        .panel-section .panel-ref-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .panel-section .panel-ref-item {
            padding: 10px;
            background: #f5f5f5;
            border-radius: 4px;
            margin-bottom: 8px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .panel-section .panel-ref-item:hover {
            background: #e3f2fd;
            transform: translateX(4px);
        }
        .panel-section .panel-ref-name {
            font-weight: 600;
            color: #333;
            display: block;
            margin-bottom: 6px;
        }
        .panel-section .panel-ref-meta {
            font-size: 11px;
            color: #666;
            line-height: 1.6;
        }
        .panel-section .panel-ref-meta div {
            margin-bottom: 2px;
        }
        .panel-section .panel-no-refs {
            color: #999;
            font-style: italic;
            font-size: 13px;
        }
        .badge {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 10px;
            font-weight: 600;
            margin-left: 6px;
        }
        .badge.action {
            background: #ff9800;
            color: white;
        }
        .badge.reference {
            background: #2196f3;
            color: white;
        }
        #graph {
            flex: 1;
            height: 100%;
            background: white;
        }
        .graph-container {
            position: relative;
        }
        .graph-legend {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 10px 12px;
            font-size: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            z-index: 100;
        }
        .legend-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 4px;
            color: #666;
        }
        .legend-item:last-child {
            margin-bottom: 0;
        }
        .legend-color {
            width: 14px;
            height: 14px;
            border-radius: 3px;
            flex-shrink: 0;
        }
        .table-toolbar {
            padding: 12px 20px;
            background: white;
            border-bottom: 1px solid #e0e0e0;
        }
        .table-container {
            padding: 0 20px 20px 20px;
            background: white;
            height: calc(100% - 57px);
            overflow-y: auto;
        }
        .search-box {
            padding: 6px 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            width: 250px;
            font-size: 13px;
            height: 32px;
            box-sizing: border-box;
        }
        .graph-toolbar {
            padding: 8px 15px;
            background: white;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            gap: 10px;
            align-items: center;
        }
        .reset-btn {
            padding: 6px 14px;
            background: #e8eaf6;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            height: 32px;
            box-sizing: border-box;
            display: flex;
            align-items: center;
        }
        .reset-btn:hover {
            background: #c5cae9;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }
        th {
            text-align: left;
            padding: 12px 15px;
            background: #f8f9fa;
            border-bottom: 2px solid #dee2e6;
            font-weight: 600;
            cursor: pointer;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        th:hover {
            background: #e9ecef;
        }
        td {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
        }
        tr:hover {
            background: #f8f9fa;
            cursor: pointer;
        }
        .type-badge {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }
        .detail-panel {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 8px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.2);
            width: 600px;
            max-height: 80vh;
            z-index: 1000;
            flex-direction: column;
        }
        .detail-panel-body {
            padding: 20px 25px 25px 25px;
            overflow-y: auto;
            flex: 1;
            min-height: 0;
        }
        .detail-panel.active {
            display: flex;
        }
        .detail-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
        }
        .detail-overlay.active {
            display: block;
        }
        .detail-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 25px 15px 25px;
            border-bottom: 2px solid #e8eaf6;
            flex-shrink: 0;
        }
        .detail-header h2 {
            color: #1a237e;
            font-size: 18px;
            margin: 0;
        }
        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            color: #999;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            line-height: 30px;
            text-align: center;
        }
        .close-btn:hover {
            color: #333;
        }
        .detail-section {
            margin-bottom: 20px;
        }
        .detail-section + .detail-section {
            border-top: 2px solid #e0e0e0;
            padding-top: 20px;
            margin-top: 20px;
        }
        .detail-section h3 {
            color: #303f9f;
            font-size: 14px;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .ref-list {
            list-style: none;
            padding: 0;
        }
        .ref-item {
            padding: 10px;
            margin-bottom: 8px;
            background: #f8f9fa;
            border-left: 3px solid #1a237e;
            border-radius: 4px;
        }
        .ref-name {
            font-weight: 600;
            color: #1a237e;
            display: block;
            margin-bottom: 4px;
        }
        .ref-meta {
            font-size: 12px;
            color: #666;
        }
        .ref-meta span {
            margin-right: 12px;
        }
        .no-refs {
            color: #999;
            font-style: italic;
            padding: 10px;
        }
        .type-form {
            background: #e3f2fd;
            color: #1565c0;
        }
        .type-workflow {
            background: #f3e5f5;
            color: #7b1fa2;
        }
        .type-tasktype {
            background: #e0f2f1;
            color: #00695c;
        }
        .type-external {
            background: #fff3e0;
            color: #e65100;
            margin-left: 6px;
        }
        .group-header {
            background: #f8f9fa;
            cursor: pointer;
            user-select: none;
            font-weight: 600;
            font-size: 15px;
            color: #333;
        }
        .group-header:hover {
            background: #e9ecef;
        }
        .group-header td {
            padding: 15px 15px !important;
            border-bottom: 2px solid #dee2e6 !important;
        }
        .group-toggle {
            font-size: 14px;
            color: #666;
            margin-left: 8px;
            transition: transform 0.2s;
            display: inline-block;
        }
        .group-toggle.collapsed {
            transform: rotate(-90deg);
        }
        .group-count {
            background: #1a237e;
            color: white;
            padding: 2px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
            margin-left: 10px;
        }
        tr.item-row.hidden {
            display: none;
        }
        .markdown-container {
            padding: 30px 50px;
            max-width: 900px;
            margin: 0 auto;
            background: white;
            min-height: 100%;
        }
        .markdown-container h1 {
            color: #1a237e;
            border-bottom: 2px solid #e8eaf6;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .markdown-container h2 {
            color: #303f9f;
            margin-top: 30px;
            margin-bottom: 15px;
        }
        .markdown-container ul {
            margin-left: 20px;
            margin-bottom: 15px;
        }
        .markdown-container li {
            margin-bottom: 8px;
            line-height: 1.6;
        }
        .markdown-container p {
            line-height: 1.7;
            margin-bottom: 15px;
        }
        .markdown-container strong {
            color: #1a237e;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-left">
            <h1>Solution Map</h1>
            <span class="subtitle">¬∑ Room 24962</span>
        </div>
        <div class="stats">
            <span class="stat">üìã 50 Forms</span>
            <span class="stat">‚ö° 11 Workflows</span>
            <span class="stat" style="background: rgba(38, 166, 154, 0.25);">‚óÜ 5 Task Types</span>
            <span class="stat">üîó 30 Relationships</span>
            <span class="stat">üèùÔ∏è 34 Isolated</span>
        </div>
    </div>

    <div class="tabs">
        <div class="tab active" onclick="showTab('graph')">Graph</div>
        <div class="tab" onclick="showTab('table')">Object Grid</div>
        <div class="tab" onclick="showTab('summary')">AI Summary</div>
    </div>

    <div id="graph-content" class="content active">
        <div class="graph-toolbar">
            <input type="text" id="graph-search" class="search-box" placeholder="Search forms..." onkeyup="searchGraph(this.value)">
            <button onclick="resetGraph()" class="reset-btn">Reset View</button>
        </div>
        <div class="graph-container">
            <div id="graph-panel" class="graph-panel">
                <div class="panel-header">
                    <h3 id="panel-title">Select a node</h3>
                    <button onclick="closePanel()" class="panel-close">√ó</button>
                </div>
                <div class="panel-body">
                    <div class="panel-section">
                        <h4>References (Outgoing)</h4>
                        <ul id="panel-outgoing" class="panel-ref-list"></ul>
                    </div>
                    <div class="panel-section">
                        <h4>Referenced By (Incoming)</h4>
                        <ul id="panel-incoming" class="panel-ref-list"></ul>
                    </div>
                </div>
            </div>
            <div id="graph"></div>
            <div class="graph-legend">
                <div class="legend-title">Nodes</div>
                <div class="legend-item"><span class="legend-color" style="background:#4fc3f7"></span> Local Form</div>
                <div class="legend-item"><span class="legend-color" style="background:#ff9800"></span> External Form</div>
                <div class="legend-item"><span class="legend-color" style="background:#ba68c8"></span> Workflow</div>
                <div class="legend-item"><span class="legend-color" style="background:#26a69a"></span> Local Task Type</div>
                <div class="legend-item"><span class="legend-color" style="background:#80cbc4"></span> External Task Type</div>
                <div class="legend-item"><span class="legend-color" style="background:#ff6b6b"></span> Selected</div>
                <div class="legend-item"><span class="legend-color" style="background:#ffd93d"></span> Connected</div>
                <div class="legend-title" style="margin-top:12px">Relationships</div>
                <div class="legend-item"><span style="width:20px;height:2px;background:#2196f3;display:inline-block"></span> Field Reference</div>
                <div class="legend-item"><span style="width:20px;height:2px;background:#ff9800;display:inline-block;background-image:linear-gradient(90deg,#ff9800 50%,transparent 50%);background-size:8px 2px"></span> Custom Action</div>
            </div>
        </div>
    </div>

    <div id="table-content" class="content">
        <div class="table-toolbar">
            <input type="text" id="grid-search" class="search-box" placeholder="Search objects..." onkeyup="filterGrid(this.value)">
        </div>
        <div class="table-container" id="object-grid">
            <!-- Grid content will be generated by JavaScript -->
        </div>

        <!-- Detail panel overlay and modal -->
        <div class="detail-overlay" id="detail-overlay" onclick="closeDetails()"></div>
        <div class="detail-panel" id="detail-panel">
            <div class="detail-header">
                <h2 id="detail-title">Details</h2>
                <button class="close-btn" onclick="closeDetails()">√ó</button>
            </div>
            <div class="detail-panel-body">
                <div class="detail-section">
                    <h3>References (Outgoing)</h3>
                    <ul class="ref-list" id="refs-out"></ul>
                </div>
                <div class="detail-section">
                    <h3>Referenced By (Incoming)</h3>
                    <ul class="ref-list" id="refs-in"></ul>
                </div>
            </div>
        </div>
    </div>

    <div id="summary-content" class="content">
        <div class="markdown-container" id="markdown-content">
            <h1>Veoci Solution Analysis: Container ID 24962</h1>
<h2>1. Overview</h2>
<p>This Veoci solution appears to be designed for managing a <strong>Stanley Cup Playoffs Pick-em game or contest</strong>, likely within a larger organization. It tracks user picks, calculates standings, and potentially manages various aspects of the tournament itself (e.g., game schedules, team uniforms). Additionally, it seems to include general testing and demonstration forms for Veoci functionality. The solution aims to:</p>
<ul>
<li><strong>Collect user predictions:</strong> Allowing participants to make predictions for playoff games.</li>
<li><strong>Calculate and track standings:</strong> Automatically determine winners and losers based on actual game results.</li>
<li><strong>Manage tournament information:</strong> Store and display information such as team uniforms and potentially game schedules (though not explicitly clear).</li>
<li><strong>Provide general Veoci function examples:</strong> Includes various test and example forms for demonstration purposes.</li>
</ul>
<h2>2. Core Components</h2>
<p>The core components are the forms that are most frequently referenced, indicating their central role in data management and relationships:</p>
<ul>
<li><strong>2016 Playoff Pick-em Users:</strong> This form stores information about the participants in the pick-em contest (e.g., usernames, contact information). It is the most frequently referenced form, acting as the central hub for user-related data.</li>
<li><strong>2016 Playoff Uniform Reference:</strong> This form likely contains information or images of the team uniforms used in the playoffs. It is used in conjunction with other forms.</li>
<li><strong>2016 Playoff Standings:</strong> This form keeps track of the standings for the pick-em contest. It is linked to the "2016 Playoff Pick-em Users" form, allowing for the display of user data and their current point totals.</li>
<li><strong>2016 Stanely Cup Playoffs - Round 1 &amp; Round 2 &amp; Conference Finals:</strong> These forms likely track the actual games and results for different playoff rounds. They are connected to user picks and uniform references.</li>
</ul>
<h2>3. How It Works</h2>
<p>The solution operates through data entry into forms, which then trigger workflows and actions to update other forms. Here's a breakdown:</p>
<ul>
<li><strong>User Picks:</strong> Users likely interact with a form to submit their predictions for the playoff games. This data is stored in the "2016 Playoff Pick-em Users" form, and their predictions may be associated with specific playoff rounds.</li>
<li><strong>Game Results:</strong> As games occur, results are entered into the round-specific forms (e.g., "2016 Stanley Cup Playoffs - Round 1").</li>
<li><strong>Automated Updates:</strong> Once game results are entered, workflows and actions trigger calculations and updates to the "2016 Playoff Standings" form.</li>
<li><strong>Data Flow:</strong><ul>
<li>User data &amp; picks are entered into "2016 Playoff Pick-em Users".</li>
<li>Game results are entered into round-specific playoff forms.</li>
<li>Custom actions/workflows use these results and user picks to update "2016 Playoff Standings".</li>
<li>Reference information for playoff teams and locations can also be stored within the system and accessed through associated forms.</li>
</ul>
</li>
</ul>
<h2>4. Automations &amp; Actions</h2>
<p>Custom actions play a key role in automating the process:</p>
<ul>
<li><strong>Initialize User Standing:</strong>  When a new playoff round entry is created in "2016 Stanely Cup Playoffs - Round 1", it triggers the creation of a corresponding entry in the "2016 Playoff Standings" form. This likely sets up the initial standings for that round. <code>(trigger: CHILD_OBJECT_CREATED, type: ACTION_CREATES_ENTRY)</code></li>
<li><strong>Launch WF: Form with File Attachment -&gt; Workflow:</strong> This action starts the "Workflow" workflow when a new entry is created in the "Form with File Attachment" form. This allows the workflow to process attached files and trigger subsequent events. <code>(trigger: CHILD_OBJECT_CREATED, type: ACTION_INVOKES_WORKFLOW)</code></li>
<li><strong>V1 Manual Object Custom Action: V1 Print Views (Group Level Form- Regression) -&gt; V1 Print Views (Group Level Form- Regression):</strong> This action creates a new entry from the same form which likely copies current entry data and allows for edits/modification. <code>(trigger: OBJECT_MANUAL, type: ACTION_CREATES_ENTRY)</code></li>
<li><strong>Manual Create Task: 265 -&gt; 226:</strong> This action creates a task assigned to user(s) for reviewing or acting on the entry for form 265.</li>
</ul>
<h2>5. Supporting Components</h2>
<ul>
<li><strong>Scheduler - AI Prompt Library &amp; Trigger Schedule Creation:</strong> These forms are likely related to scheduling and automation tasks, potentially using AI to generate prompts or manage schedules.</li>
<li><strong>Forms prefixed with "V1":</strong> These forms appear to be part of a version 1 implementation, possibly related to testing of group-level form functionalities or regression testing.</li>
<li><strong>Forms with generic names:</strong> Forms such as "Form with PersonPicker", "Form with File Attachment", and "Form with date field" are likely for testing and demonstration of specific field types and Veoci features.</li>
<li><strong>Workflows:</strong> The various workflows (e.g., "Workflow", "112942 - WF") are responsible for automating tasks within the system, such as data processing, notifications, or approval processes.</li>
</ul>
<h2>6. Notes</h2>
<ul>
<li>The solution uses a mix of specific (e.g., "2016 Playoff...") and generic form names, suggesting a combination of dedicated application components and general Veoci feature testing.</li>
<li>The statistics indicate a moderate level of complexity (50 forms, 11 workflows). A well-designed system with custom actions implemented can automate several of the processes.</li>
<li>The "V1" forms indicate ongoing development and potential future enhancements.</li>
</ul>
        </div>
    </div>

    <script>
        // Human-readable trigger names
        function formatTriggerType(trigger) {
            const triggerMap = {
                'CHILD_OBJECT_MANUAL': 'Manual Trigger',
                'CHILD_OBJECT_CREATED': 'On Create',
                'CHILD_OBJECT_UPDATED': 'On Update',
                'CHILD_OBJECT_DELETED': 'On Delete',
                'SCHEDULED_ACTION': 'Scheduled',
                'BULK_ACTION_MANUAL': 'Bulk Manual',
                'OBJECT_MANUAL': 'Manual',
                'LINKED': 'Linked Action',
                'WEB_HOOK': 'Webhook',
                'LIST_MEMBER_ADDED': 'Member Added',
                'LIST_MEMBER_REMOVED': 'Member Removed'
            };
            return triggerMap[trigger] || trigger;
        }

        // Human-readable field type names
        function getReadableType(edge) {
            const type = edge.relationship_type || edge;
            const typeMap = {
                'LOOKUP': 'Form Lookup',
                'WORKFLOW_LOOKUP': 'Workflow Lookup',
                'FORM_ENTRY': 'Form Entry Link',
                'WORKFLOW': 'Workflow Entry Link',
                'TASK': 'Task Link',
                'ACTION_CREATES_ENTRY': 'Creates Entry',
                'ACTION_INVOKES_WORKFLOW': 'Invokes Workflow',
                'ACTION_CREATES_TASK': 'Creates Task',
                'ACTION_LAUNCHES_TEMPLATE': 'Launches Template',
                'ACTION_LAUNCHES_PLAN': 'Launches Plan'
            };

            // Special case: REFERENCE depends on is_subform property
            if (type === 'REFERENCE') {
                if (edge.is_subform === true) {
                    return 'Subform';
                } else if (edge.is_subform === false) {
                    return 'Reference';
                } else {
                    return 'Reference/Subform';
                }
            }

            return typeMap[type] || type;
        }

        // Tab switching
        function showTab(tabName) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
            const tabIndex = tabName === 'graph' ? 1 : tabName === 'table' ? 2 : 3;
            document.querySelector(`.tab:nth-child(${tabIndex})`).classList.add('active');
            document.getElementById(tabName + '-content').classList.add('active');
        }

        // Store edges and nodes data for detail panel and search
        const edgesData = [{"from": "3879481", "to": "3879035", "label": "REF", "title": "REFERENCE: User Reference", "arrows": "to", "dashes": false, "color": {"color": "#2196f3", "highlight": "#1976d2"}, "width": 2, "edge_category": "field", "relationship_type": "REFERENCE", "field_name": "User Reference", "is_subform": true}, {"from": "1591301317", "to": "1591312057", "label": "REF", "title": "REFERENCE: Involved Forms", "arrows": "to", "dashes": false, "color": {"color": "#2196f3", "highlight": "#1976d2"}, "width": 2, "edge_category": "field", "relationship_type": "REFERENCE", "field_name": "Involved Forms", "is_subform": true}, {"from": "1591301317", "to": "1591301314", "label": "LOO", "title": "LOOKUP: Select an AI Prompt to use", "arrows": "to", "dashes": false, "color": {"color": "#2196f3", "highlight": "#1976d2"}, "width": 2, "edge_category": "field", "relationship_type": "LOOKUP", "field_name": "Select an AI Prompt to use", "is_subform": null}, {"from": "4067619", "to": "3879035", "label": "REF", "title": "REFERENCE: Which Baum are you?", "arrows": "to", "dashes": false, "color": {"color": "#2196f3", "highlight": "#1976d2"}, "width": 2, "edge_category": "field", "relationship_type": "REFERENCE", "field_name": "Which Baum are you?", "is_subform": true}, {"from": "4067619", "to": "3878862", "label": "REF", "title": "REFERENCE: Uniform Reference", "arrows": "to", "dashes": false, "color": {"color": "#2196f3", "highlight": "#1976d2"}, "width": 2, "edge_category": "field", "relationship_type": "REFERENCE", "field_name": "Uniform Reference", "is_subform": true}, {"from": "1464973691", "to": "1464973698", "label": "WOR", "title": "WORKFLOW: WEL", "arrows": "to", "dashes": false, "color": {"color": "#2196f3", "highlight": "#1976d2"}, "width": 2, "edge_category": "field", "relationship_type": "WORKFLOW", "field_name": "WEL", "is_subform": null}, {"from": "1464973691", "to": "8015", "label": "TAS", "title": "TASK: Task Link", "arrows": "to", "dashes": false, "color": {"color": "#2196f3", "highlight": "#1976d2"}, "width": 2, "edge_category": "field", "relationship_type": "TASK", "field_name": "Task Link", "is_subform": null}, {"from": "1464973691", "to": "1464973686", "label": "FOR", "title": "FORM_ENTRY: Form Entry Link", "arrows": "to", "dashes": false, "color": {"color": "#2196f3", "highlight": "#1976d2"}, "width": 2, "edge_category": "field", "relationship_type": "FORM_ENTRY", "field_name": "Form Entry Link", "is_subform": true}, {"from": "1186713855", "to": "3037", "label": "TAS", "title": "TASK: test task link", "arrows": "to", "dashes": false, "color": {"color": "#2196f3", "highlight": "#1976d2"}, "width": 2, "edge_category": "field", "relationship_type": "TASK", "field_name": "test task link", "is_subform": null}, {"from": "49754", "to": "231056", "label": "ACT", "title": "Launch WF\nTrigger: CHILD_OBJECT_CREATED\nAutomatic: Yes", "arrows": "to", "dashes": true, "color": {"color": "#ff9800", "highlight": "#f57c00"}, "width": 2, "edge_category": "action", "action_name": "Launch WF", "trigger_type": "CHILD_OBJECT_CREATED", "automatic": true}, {"from": "407801294", "to": "19850354", "label": "REF", "title": "REFERENCE: REF", "arrows": "to", "dashes": false, "color": {"color": "#2196f3", "highlight": "#1976d2"}, "width": 2, "edge_category": "field", "relationship_type": "REFERENCE", "field_name": "REF", "is_subform": null}, {"from": "1120745549", "to": "1120745578", "label": "REF", "title": "REFERENCE: Main - Reference", "arrows": "to", "dashes": false, "color": {"color": "#2196f3", "highlight": "#1976d2"}, "width": 2, "edge_category": "field", "relationship_type": "REFERENCE", "field_name": "Main - Reference", "is_subform": null}, {"from": "1120745549", "to": "1120745585", "label": "REF", "title": "REFERENCE: Main - Subform", "arrows": "to", "dashes": false, "color": {"color": "#2196f3", "highlight": "#1976d2"}, "width": 2, "edge_category": "field", "relationship_type": "REFERENCE", "field_name": "Main - Subform", "is_subform": true}, {"from": "1120745549", "to": "1120745545", "label": "LOO", "title": "LOOKUP: Main - Form Lookup", "arrows": "to", "dashes": false, "color": {"color": "#2196f3", "highlight": "#1976d2"}, "width": 2, "edge_category": "field", "relationship_type": "LOOKUP", "field_name": "Main - Form Lookup", "is_subform": null}, {"from": "1120745549", "to": "1120745549", "label": "ACT", "title": "V1 Manual Object Custom Action\nTrigger: OBJECT_MANUAL\nAutomatic: Yes", "arrows": "to", "dashes": true, "color": {"color": "#ff9800", "highlight": "#f57c00"}, "width": 2, "edge_category": "action", "action_name": "V1 Manual Object Custom Action", "trigger_type": "OBJECT_MANUAL", "automatic": true}, {"from": "579494678", "to": "3037", "label": "ACT", "title": "Manual Create Task\nTrigger: CHILD_OBJECT_MANUAL\nAutomatic: No", "arrows": "to", "dashes": true, "color": {"color": "#ff9800", "highlight": "#f57c00"}, "width": 2, "edge_category": "action", "action_name": "Manual Create Task", "trigger_type": "CHILD_OBJECT_MANUAL", "automatic": false}, {"from": "3945368", "to": "3878862", "label": "REF", "title": "REFERENCE: Uniform Reference", "arrows": "to", "dashes": false, "color": {"color": "#2196f3", "highlight": "#1976d2"}, "width": 2, "edge_category": "field", "relationship_type": "REFERENCE", "field_name": "Uniform Reference", "is_subform": true}, {"from": "3945368", "to": "3879035", "label": "REF", "title": "REFERENCE: User Info", "arrows": "to", "dashes": false, "color": {"color": "#2196f3", "highlight": "#1976d2"}, "width": 2, "edge_category": "field", "relationship_type": "REFERENCE", "field_name": "User Info", "is_subform": true}, {"from": "1120745578", "to": "1120745542", "label": "REF", "title": "REFERENCE: V1 Reference (V1 Common Fields (Group Level)", "arrows": "to", "dashes": false, "color": {"color": "#2196f3", "highlight": "#1976d2"}, "width": 2, "edge_category": "field", "relationship_type": "REFERENCE", "field_name": "V1 Reference (V1 Common Fields (Group Level)", "is_subform": null}, {"from": "4142476", "to": "3879035", "label": "REF", "title": "REFERENCE: User Info", "arrows": "to", "dashes": false, "color": {"color": "#2196f3", "highlight": "#1976d2"}, "width": 2, "edge_category": "field", "relationship_type": "REFERENCE", "field_name": "User Info", "is_subform": true}, {"from": "4142476", "to": "3878862", "label": "REF", "title": "REFERENCE: Uniform Reference", "arrows": "to", "dashes": false, "color": {"color": "#2196f3", "highlight": "#1976d2"}, "width": 2, "edge_category": "field", "relationship_type": "REFERENCE", "field_name": "Uniform Reference", "is_subform": true}, {"from": "36020", "to": "36015", "label": "REF", "title": "REFERENCE: Reference field", "arrows": "to", "dashes": false, "color": {"color": "#2196f3", "highlight": "#1976d2"}, "width": 2, "edge_category": "field", "relationship_type": "REFERENCE", "field_name": "Reference field", "is_subform": null}, {"from": "1120745585", "to": "1120745542", "label": "LOO", "title": "LOOKUP: Subform -Form Lookup", "arrows": "to", "dashes": false, "color": {"color": "#2196f3", "highlight": "#1976d2"}, "width": 2, "edge_category": "field", "relationship_type": "LOOKUP", "field_name": "Subform -Form Lookup", "is_subform": null}, {"from": "3878906", "to": "3878862", "label": "REF", "title": "REFERENCE: Uniform Reference", "arrows": "to", "dashes": false, "color": {"color": "#2196f3", "highlight": "#1976d2"}, "width": 2, "edge_category": "field", "relationship_type": "REFERENCE", "field_name": "Uniform Reference", "is_subform": true}, {"from": "3878906", "to": "3879035", "label": "REF", "title": "REFERENCE: User Info", "arrows": "to", "dashes": false, "color": {"color": "#2196f3", "highlight": "#1976d2"}, "width": 2, "edge_category": "field", "relationship_type": "REFERENCE", "field_name": "User Info", "is_subform": true}, {"from": "3878906", "to": "3879213", "label": "REF", "title": "REFERENCE: Pre-tournament Picks", "arrows": "to", "dashes": false, "color": {"color": "#2196f3", "highlight": "#1976d2"}, "width": 2, "edge_category": "field", "relationship_type": "REFERENCE", "field_name": "Pre-tournament Picks", "is_subform": true}, {"from": "3878906", "to": "3879481", "label": "ACT", "title": "Initialize User Standing\nTrigger: CHILD_OBJECT_CREATED\nAutomatic: Yes", "arrows": "to", "dashes": true, "color": {"color": "#ff9800", "highlight": "#f57c00"}, "width": 2, "edge_category": "action", "action_name": "Initialize User Standing", "trigger_type": "CHILD_OBJECT_CREATED", "automatic": true}, {"from": "264803347", "to": "264803365", "label": "REF", "title": "REFERENCE: sub", "arrows": "to", "dashes": false, "color": {"color": "#2196f3", "highlight": "#1976d2"}, "width": 2, "edge_category": "field", "relationship_type": "REFERENCE", "field_name": "sub", "is_subform": true}, {"from": "724675052", "to": "36015", "label": "REF", "title": "REFERENCE: Reference", "arrows": "to", "dashes": false, "color": {"color": "#2196f3", "highlight": "#1976d2"}, "width": 2, "edge_category": "field", "relationship_type": "REFERENCE", "field_name": "Reference", "is_subform": null}, {"from": "34856", "to": "36015", "label": "REF", "title": "REFERENCE: Reference field", "arrows": "to", "dashes": false, "color": {"color": "#2196f3", "highlight": "#1976d2"}, "width": 2, "edge_category": "field", "relationship_type": "REFERENCE", "field_name": "Reference field", "is_subform": null}];
        const nodesData = [{"id": "3879481", "label": "2016 Playoff Standings", "title": "2016 Playoff Standings (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "833790370", "label": "Text - Automatic Value", "title": "Text - Automatic Value (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "318992", "label": "Form with PersonPicker", "title": "Form with PersonPicker (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "3879213", "label": "2016 Playoffs -\nPre-tournament picks", "title": "2016 Playoffs - Pre-tournament picks (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "2867516", "label": "Drew's Group-Level Test\nForm", "title": "Drew's Group-Level Test Form (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "1591301314", "label": "Scheduler - AI Prompt\nLibrary", "title": "Scheduler - AI Prompt Library (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "1591301317", "label": "Trigger Schedule Creation", "title": "Trigger Schedule Creation (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "4067619", "label": "2016 Stanley Cup Playoffs\n- Conference Finals", "title": "2016 Stanley Cup Playoffs - Conference Finals (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "1546588171", "label": "Imported Form", "title": "Imported Form (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "1464973686", "label": "112942 - Ref Form", "title": "112942 - Ref Form  (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "1464973691", "label": "112942 - Main Form", "title": "112942 - Main Form  (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "3879035", "label": "2016 Playoff Pick-em\nUsers", "title": "2016 Playoff Pick-em Users (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "1186713855", "label": "105955- 5 - Form", "title": "105955- 5 - Form (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "49754", "label": "Form with File Attachment", "title": "Form with File Attachment (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "1591312057", "label": "SUBFORM: Trigger schedule\ncreation - form details", "title": "SUBFORM: Trigger schedule creation - form details (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "1591301308", "label": "Schedule", "title": "Schedule (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "35700", "label": "Form with date field", "title": "Form with date field (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "1440439725", "label": "A1 Lookup Form (Group\nLevel) - Old", "title": "A1 Lookup Form (Group Level) - Old (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "407801294", "label": "251", "title": "251 (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "1120745549", "label": "V1 Print Views (Group\nLevel Form- Regression)", "title": "V1 Print Views (Group Level Form- Regression) (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "1120745545", "label": "V1 Form Lookup (Group\nLevel)", "title": "V1 Form Lookup (Group Level) (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "264803394", "label": "2 new", "title": "2 new (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "1120745542", "label": "V1 Common Fields (Group\nLevel)", "title": "V1 Common Fields (Group Level) (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "1120745537", "label": "V1 Form Entry Link (Group\nLevel)", "title": "V1 Form Entry Link (Group Level) (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "833805117", "label": "CEC - Auto Value", "title": "CEC - Auto Value (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "579494678", "label": "265", "title": "265 (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "264803158", "label": "1", "title": "1 (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "3945368", "label": "2016 Stanley Cup Playoffs\n- Round 2", "title": "2016 Stanley Cup Playoffs - Round 2 (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "18129328", "label": "Form with locations", "title": "Form with locations (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "1120745578", "label": "V1 Reference Form (Group\nLevel)", "title": "V1 Reference Form (Group Level) (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "36015", "label": "Referenced Form", "title": "Referenced Form (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "4142476", "label": "2016 Stanley Cup Playoffs\n- Finals", "title": "2016 Stanley Cup Playoffs - Finals (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "36020", "label": "Referencing Form", "title": "Referencing Form (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "1120745585", "label": "V1 Subform (Group Level)", "title": "V1 Subform (Group Level) (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "3878906", "label": "2016 Stanely Cup Playoffs\n- Round 1", "title": "2016 Stanely Cup Playoffs - Round 1 (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "1464973697", "label": "Form for Single and Multi\nSelect Fields", "title": "Form for Single and Multi Select Fields (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "1401640275", "label": "All Fields Form -\nReference", "title": "All Fields Form - Reference (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "1401637713", "label": "All Fields Form -\nReference", "title": "All Fields Form - Reference (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "264803347", "label": "1", "title": "1 (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "724675052", "label": "Release 268", "title": "Release 268 (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "1591302457", "label": "Employee Weekly\nAvailability", "title": "Employee Weekly Availability (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "95969", "label": "Form with Task field", "title": "Form with Task field (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "745107083", "label": "Reference Form-Group", "title": "Reference Form-Group (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "6843781", "label": "Test Group Attachment\nForm", "title": "Test Group Attachment Form (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "264803365", "label": "1", "title": "1 (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "3878862", "label": "2016 Playoff Uniform\nReference", "title": "2016 Playoff Uniform Reference (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "264803122", "label": "1", "title": "1 (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "1523493171", "label": "Incident Report", "title": "Incident Report (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "1488376648", "label": "Analyzed Data Storage\nForm", "title": "Analyzed Data Storage Form (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "19850354", "label": "All Fields", "title": "All Fields (form) - External", "color": "#ff9800", "shape": "dot", "size": 30, "font": {"vadjust": 20}}, {"id": "664792941", "label": "271", "title": "271 (workflow)", "color": "#ba68c8", "shape": "square", "size": 25, "font": {"vadjust": 20}}, {"id": "1401640281", "label": "WF for Form Entry Link\nTest Case", "title": "WF for Form Entry Link Test Case  (workflow)", "color": "#ba68c8", "shape": "square", "size": 25, "font": {"vadjust": 20}}, {"id": "231056", "label": "Workflow", "title": "Workflow (workflow)", "color": "#ba68c8", "shape": "square", "size": 25, "font": {"vadjust": 20}}, {"id": "1120745598", "label": "V1 Workflow Lookup (Group\nLevel)", "title": "V1 Workflow Lookup (Group Level) (workflow)", "color": "#ba68c8", "shape": "square", "size": 25, "font": {"vadjust": 20}}, {"id": "1464973698", "label": "112942 - WF", "title": "112942 - WF (workflow)", "color": "#ba68c8", "shape": "square", "size": 25, "font": {"vadjust": 20}}, {"id": "1120745593", "label": "V1 Workflow Entry\nLink-Group", "title": "V1 Workflow Entry Link-Group (workflow)", "color": "#ba68c8", "shape": "square", "size": 25, "font": {"vadjust": 20}}, {"id": "605831061", "label": "267", "title": "267 (workflow)", "color": "#ba68c8", "shape": "square", "size": 25, "font": {"vadjust": 20}}, {"id": "1120488722", "label": "Parallel WF", "title": "Parallel WF (workflow)", "color": "#ba68c8", "shape": "square", "size": 25, "font": {"vadjust": 20}}, {"id": "1186713856", "label": "105955 - 5 - WF", "title": "105955 - 5 - WF (workflow)", "color": "#ba68c8", "shape": "square", "size": 25, "font": {"vadjust": 20}}, {"id": "1401637719", "label": "Form Lookup - WF Test\nCase", "title": "Form Lookup - WF Test Case (workflow)", "color": "#ba68c8", "shape": "square", "size": 25, "font": {"vadjust": 20}}, {"id": "1401637253", "label": "Bug in lookup", "title": "Bug in lookup (workflow)", "color": "#ba68c8", "shape": "square", "size": 25, "font": {"vadjust": 20}}, {"id": "191", "label": "Group Level Task Type", "title": "Group Level Task Type (task_type)", "color": "#26a69a", "shape": "diamond", "size": 30, "font": {"vadjust": 25}}, {"id": "3037", "label": "226", "title": "226 (task_type)", "color": "#26a69a", "shape": "diamond", "size": 30, "font": {"vadjust": 25}}, {"id": "3170", "label": "228", "title": "228 (task_type)", "color": "#26a69a", "shape": "diamond", "size": 30, "font": {"vadjust": 25}}, {"id": "7236", "label": "105955- 5 - Task Type", "title": "105955- 5 - Task Type (task_type)", "color": "#26a69a", "shape": "diamond", "size": 30, "font": {"vadjust": 25}}, {"id": "8015", "label": "112942 - Task Type", "title": "112942 - Task Type (task_type)", "color": "#26a69a", "shape": "diamond", "size": 30, "font": {"vadjust": 25}}, {"id": "34856", "label": "34856", "title": "34856 (form)", "color": "#4fc3f7", "shape": "dot", "size": 30, "font": {"vadjust": 20}}].map(n => ({
            ...n,
            originalColor: n.color
        }));

        // Initialize graph
        const nodes = new vis.DataSet(nodesData);
        const edges = new vis.DataSet(edgesData);

        const container = document.getElementById('graph');
        const data = { nodes: nodes, edges: edges };
        const options = {
            physics: {
                forceAtlas2Based: {
                    gravitationalConstant: -120,
                    centralGravity: 0.005,
                    springLength: 350,
                    springConstant: 0.04
                },
                solver: 'forceAtlas2Based',
                stabilization: { iterations: 200 }
            },
            nodes: {
                font: {
                    size: 11,
                    multi: true,
                    face: 'system-ui, -apple-system, sans-serif'
                }
            },
            edges: {
                font: { size: 10, align: 'middle' },
                smooth: { type: 'curvedCW', roundness: 0.2 }
            },
            interaction: {
                hover: true,
                tooltipDelay: 100
            }
        };

        const network = new vis.Network(container, data, options);

        // Add click handler for nodes
        network.on('click', function(params) {
            if (params.nodes && params.nodes.length > 0) {
                const nodeId = params.nodes[0];
                showGraphPanel(nodeId);
            }
        });

        // Debounced search
        let searchTimeout;
        function searchGraph(query) {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => {
                performSearch(query);
            }, 150);
        }

        // Actual search logic
        function performSearch(query) {
            if (!query || query.length < 2) {
                // Reset colors without clearing input
                resetGraphColors();
                return;
            }

            const q = query.toLowerCase();
            const matchingNodes = [];
            const connectedNodes = new Set();

            // Find matching nodes
            nodesData.forEach(node => {
                if (node.label.toLowerCase().includes(q)) {
                    matchingNodes.push(node.id);
                }
            });

            // Find connected nodes
            matchingNodes.forEach(nodeId => {
                edgesData.forEach(edge => {
                    if (edge.from === nodeId) {
                        connectedNodes.add(edge.to);
                    }
                    if (edge.to === nodeId) {
                        connectedNodes.add(edge.from);
                    }
                });
            });

            // Update node colors and styles
            const updates = nodesData.map(node => {
                if (matchingNodes.includes(node.id)) {
                    return { id: node.id, color: '#ff6b6b', font: { size: 18, bold: true } };
                } else if (connectedNodes.has(node.id)) {
                    return { id: node.id, color: '#ffd93d', font: { size: 16 } };
                } else {
                    return { id: node.id, color: '#ddd', font: { color: '#999', size: 12 } };
                }
            });

            nodes.update(updates);

            // Focus on first matching node
            if (matchingNodes.length > 0) {
                network.focus(matchingNodes[0], {
                    scale: 1.2,
                    animation: { duration: 500 }
                });
            }
        }

        // Reset colors only (called from search when query < 2)
        function resetGraphColors() {
            const updates = nodesData.map(n => ({
                id: n.id,
                color: n.originalColor,
                font: { size: 14, color: '#343434' }
            }));
            nodes.update(updates);
        }

        // Full reset including input clear (called from Reset button)
        function resetGraph() {
            resetGraphColors();
            network.fit({ animation: { duration: 500 } });
            document.getElementById('graph-search').value = '';
        }

        // Highlight a node and its connections
        function highlightNode(nodeId) {
            const connectedNodes = new Set();

            // Find all nodes connected to this one
            edgesData.forEach(edge => {
                if (edge.from === nodeId) {
                    connectedNodes.add(edge.to);
                }
                if (edge.to === nodeId) {
                    connectedNodes.add(edge.from);
                }
            });

            // Update node colors
            const updates = nodesData.map(n => {
                if (n.id === nodeId) {
                    // Selected node - bright highlight
                    return { id: n.id, color: '#ff6b6b', font: { size: 18, color: '#333', bold: true } };
                } else if (connectedNodes.has(n.id)) {
                    // Connected node - secondary highlight
                    return { id: n.id, color: '#ffd93d', font: { size: 16, color: '#333' } };
                } else {
                    // Other nodes - dim
                    return { id: n.id, color: '#ddd', font: { color: '#999', size: 12 } };
                }
            });

            nodes.update(updates);
        }

        // Focus on a node, highlight it and its connections, then show panel
        function focusNode(nodeId) {
            // Highlight the node and its connections
            highlightNode(nodeId);

            // Focus camera on the node
            network.focus(nodeId, {
                scale: 1.2,
                animation: { duration: 500 }
            });

            // Update panel to show this node's details
            showGraphPanel(nodeId);
        }

        // Show graph panel with node details
        function showGraphPanel(nodeId) {
            // Highlight the node and its connections
            highlightNode(nodeId);

            const node = nodesData.find(n => n.id === nodeId);
            if (!node) return;

            document.getElementById('panel-title').textContent = node.label;

            // Get outgoing references
            const outgoing = edgesData.filter(e => e.from === nodeId);
            const outList = document.getElementById('panel-outgoing');
            if (outgoing.length === 0) {
                outList.innerHTML = '<li class="panel-no-refs">No outgoing references</li>';
            } else {
                // Group by category
                const actions = outgoing.filter(e => e.edge_category === 'action');
                const fields = outgoing.filter(e => e.edge_category !== 'action');

                let html = '';

                // Actions section
                if (actions.length > 0) {
                    html += '<div class="panel-subsection actions"><h5>Custom Actions</h5>';
                    html += actions.map(e => {
                        const target = nodesData.find(n => n.id === e.to);
                        return `<li class="panel-ref-item" onclick="focusNode('${e.to}')">
                            <div class="panel-ref-name">${e.action_name || target?.label || e.to}<span class="badge action">ACTION</span></div>
                            <div class="panel-ref-meta">
                                <div>Trigger: ${formatTriggerType(e.trigger_type)}</div>
                                <div>Automatic: ${e.automatic ? 'Yes' : 'No'}</div>
                            </div>
                        </li>`;
                    }).join('');
                    html += '</div>';
                }

                // Field references section
                if (fields.length > 0) {
                    html += '<div class="panel-subsection fields"><h5>Field References</h5>';
                    html += fields.map(e => {
                        const target = nodesData.find(n => n.id === e.to);
                        return `<li class="panel-ref-item" onclick="focusNode('${e.to}')">
                            <div class="panel-ref-name">${target ? target.label : e.to}</div>
                            <div class="panel-ref-meta">
                                <div>Type: ${getReadableType(e)}</div>
                                <div>Field: ${e.field_name || 'N/A'}</div>
                            </div>
                        </li>`;
                    }).join('');
                    html += '</div>';
                }

                outList.innerHTML = html;
            }

            // Get incoming references
            const incoming = edgesData.filter(e => e.to === nodeId);
            const inList = document.getElementById('panel-incoming');
            if (incoming.length === 0) {
                inList.innerHTML = '<li class="panel-no-refs">No incoming references</li>';
            } else {
                // Group by category
                const actions = incoming.filter(e => e.edge_category === 'action');
                const fields = incoming.filter(e => e.edge_category !== 'action');

                let html = '';

                // Actions section
                if (actions.length > 0) {
                    html += '<div class="panel-subsection actions"><h5>Custom Actions</h5>';
                    html += actions.map(e => {
                        const source = nodesData.find(n => n.id === e.from);
                        return `<li class="panel-ref-item" onclick="focusNode('${e.from}')">
                            <div class="panel-ref-name">${e.action_name || source?.label || e.from}<span class="badge action">ACTION</span></div>
                            <div class="panel-ref-meta">
                                <div>Trigger: ${formatTriggerType(e.trigger_type)}</div>
                                <div>Automatic: ${e.automatic ? 'Yes' : 'No'}</div>
                            </div>
                        </li>`;
                    }).join('');
                    html += '</div>';
                }

                // Field references section
                if (fields.length > 0) {
                    html += '<div class="panel-subsection fields"><h5>Field References</h5>';
                    html += fields.map(e => {
                        const source = nodesData.find(n => n.id === e.from);
                        return `<li class="panel-ref-item" onclick="focusNode('${e.from}')">
                            <div class="panel-ref-name">${source ? source.label : e.from}</div>
                            <div class="panel-ref-meta">
                                <div>Type: ${getReadableType(e)}</div>
                                <div>Field: ${e.field_name || 'N/A'}</div>
                            </div>
                        </li>`;
                    }).join('');
                    html += '</div>';
                }

                inList.innerHTML = html;
            }

            document.getElementById('graph-panel').classList.add('active');
        }

        // Close graph panel
        function closePanel() {
            document.getElementById('graph-panel').classList.remove('active');
            resetGraphColors();
        }

        // Object grid data
        const objectGridData = [{"id": "3879481", "name": "2016 Playoff Standings", "type": "Form", "refs_out": 1, "refs_in": 1, "external": false}, {"id": "833790370", "name": "Text - Automatic Value", "type": "Form", "refs_out": 0, "refs_in": 0, "external": false}, {"id": "318992", "name": "Form with PersonPicker", "type": "Form", "refs_out": 0, "refs_in": 0, "external": false}, {"id": "3879213", "name": "2016 Playoffs - Pre-tournament picks", "type": "Form", "refs_out": 0, "refs_in": 1, "external": false}, {"id": "2867516", "name": "Drew's Group-Level Test Form", "type": "Form", "refs_out": 0, "refs_in": 0, "external": false}, {"id": "1591301314", "name": "Scheduler - AI Prompt Library", "type": "Form", "refs_out": 0, "refs_in": 1, "external": false}, {"id": "1591301317", "name": "Trigger Schedule Creation", "type": "Form", "refs_out": 2, "refs_in": 0, "external": false}, {"id": "4067619", "name": "2016 Stanley Cup Playoffs - Conference Finals", "type": "Form", "refs_out": 2, "refs_in": 0, "external": false}, {"id": "1546588171", "name": "Imported Form", "type": "Form", "refs_out": 0, "refs_in": 0, "external": false}, {"id": "1464973686", "name": "112942 - Ref Form ", "type": "Form", "refs_out": 0, "refs_in": 1, "external": false}, {"id": "1464973691", "name": "112942 - Main Form ", "type": "Form", "refs_out": 3, "refs_in": 0, "external": false}, {"id": "3879035", "name": "2016 Playoff Pick-em Users", "type": "Form", "refs_out": 0, "refs_in": 5, "external": false}, {"id": "1186713855", "name": "105955- 5 - Form", "type": "Form", "refs_out": 1, "refs_in": 0, "external": false}, {"id": "49754", "name": "Form with File Attachment", "type": "Form", "refs_out": 1, "refs_in": 0, "external": false}, {"id": "1591312057", "name": "SUBFORM: Trigger schedule creation - form details", "type": "Form", "refs_out": 0, "refs_in": 1, "external": false}, {"id": "1591301308", "name": "Schedule", "type": "Form", "refs_out": 0, "refs_in": 0, "external": false}, {"id": "35700", "name": "Form with date field", "type": "Form", "refs_out": 0, "refs_in": 0, "external": false}, {"id": "1440439725", "name": "A1 Lookup Form (Group Level) - Old", "type": "Form", "refs_out": 0, "refs_in": 0, "external": false}, {"id": "407801294", "name": "251", "type": "Form", "refs_out": 1, "refs_in": 0, "external": false}, {"id": "1120745549", "name": "V1 Print Views (Group Level Form- Regression)", "type": "Form", "refs_out": 4, "refs_in": 1, "external": false}, {"id": "1120745545", "name": "V1 Form Lookup (Group Level)", "type": "Form", "refs_out": 0, "refs_in": 1, "external": false}, {"id": "264803394", "name": "2 new", "type": "Form", "refs_out": 0, "refs_in": 0, "external": false}, {"id": "1120745542", "name": "V1 Common Fields (Group Level)", "type": "Form", "refs_out": 0, "refs_in": 2, "external": false}, {"id": "1120745537", "name": "V1 Form Entry Link (Group Level)", "type": "Form", "refs_out": 0, "refs_in": 0, "external": false}, {"id": "833805117", "name": "CEC - Auto Value", "type": "Form", "refs_out": 0, "refs_in": 0, "external": false}, {"id": "579494678", "name": "265", "type": "Form", "refs_out": 1, "refs_in": 0, "external": false}, {"id": "264803158", "name": "1", "type": "Form", "refs_out": 0, "refs_in": 0, "external": false}, {"id": "3945368", "name": "2016 Stanley Cup Playoffs - Round 2", "type": "Form", "refs_out": 2, "refs_in": 0, "external": false}, {"id": "18129328", "name": "Form with locations", "type": "Form", "refs_out": 0, "refs_in": 0, "external": false}, {"id": "1120745578", "name": "V1 Reference Form (Group Level)", "type": "Form", "refs_out": 1, "refs_in": 1, "external": false}, {"id": "36015", "name": "Referenced Form", "type": "Form", "refs_out": 0, "refs_in": 3, "external": false}, {"id": "4142476", "name": "2016 Stanley Cup Playoffs - Finals", "type": "Form", "refs_out": 2, "refs_in": 0, "external": false}, {"id": "36020", "name": "Referencing Form", "type": "Form", "refs_out": 1, "refs_in": 0, "external": false}, {"id": "1120745585", "name": "V1 Subform (Group Level)", "type": "Form", "refs_out": 1, "refs_in": 1, "external": false}, {"id": "3878906", "name": "2016 Stanely Cup Playoffs - Round 1", "type": "Form", "refs_out": 4, "refs_in": 0, "external": false}, {"id": "1464973697", "name": "Form for Single and Multi Select Fields", "type": "Form", "refs_out": 0, "refs_in": 0, "external": false}, {"id": "1401640275", "name": "All Fields Form - Reference", "type": "Form", "refs_out": 0, "refs_in": 0, "external": false}, {"id": "1401637713", "name": "All Fields Form - Reference", "type": "Form", "refs_out": 0, "refs_in": 0, "external": false}, {"id": "264803347", "name": "1", "type": "Form", "refs_out": 1, "refs_in": 0, "external": false}, {"id": "724675052", "name": "Release 268", "type": "Form", "refs_out": 1, "refs_in": 0, "external": false}, {"id": "1591302457", "name": "Employee Weekly Availability", "type": "Form", "refs_out": 0, "refs_in": 0, "external": false}, {"id": "95969", "name": "Form with Task field", "type": "Form", "refs_out": 0, "refs_in": 0, "external": false}, {"id": "745107083", "name": "Reference Form-Group", "type": "Form", "refs_out": 0, "refs_in": 0, "external": false}, {"id": "6843781", "name": "Test Group Attachment Form", "type": "Form", "refs_out": 0, "refs_in": 0, "external": false}, {"id": "264803365", "name": "1", "type": "Form", "refs_out": 0, "refs_in": 1, "external": false}, {"id": "3878862", "name": "2016 Playoff Uniform Reference", "type": "Form", "refs_out": 0, "refs_in": 4, "external": false}, {"id": "264803122", "name": "1", "type": "Form", "refs_out": 0, "refs_in": 0, "external": false}, {"id": "1523493171", "name": "Incident Report", "type": "Form", "refs_out": 0, "refs_in": 0, "external": false}, {"id": "1488376648", "name": "Analyzed Data Storage Form", "type": "Form", "refs_out": 0, "refs_in": 0, "external": false}, {"id": "19850354", "name": "All Fields", "type": "Form", "refs_out": 0, "refs_in": 1, "external": true}, {"id": "664792941", "name": "271", "type": "Workflow", "refs_out": 0, "refs_in": 0}, {"id": "1401640281", "name": "WF for Form Entry Link Test Case ", "type": "Workflow", "refs_out": 0, "refs_in": 0}, {"id": "231056", "name": "Workflow", "type": "Workflow", "refs_out": 0, "refs_in": 1}, {"id": "1120745598", "name": "V1 Workflow Lookup (Group Level)", "type": "Workflow", "refs_out": 0, "refs_in": 0}, {"id": "1464973698", "name": "112942 - WF", "type": "Workflow", "refs_out": 0, "refs_in": 1}, {"id": "1120745593", "name": "V1 Workflow Entry Link-Group", "type": "Workflow", "refs_out": 0, "refs_in": 0}, {"id": "605831061", "name": "267", "type": "Workflow", "refs_out": 0, "refs_in": 0}, {"id": "1120488722", "name": "Parallel WF", "type": "Workflow", "refs_out": 0, "refs_in": 0}, {"id": "1186713856", "name": "105955 - 5 - WF", "type": "Workflow", "refs_out": 0, "refs_in": 0}, {"id": "1401637719", "name": "Form Lookup - WF Test Case", "type": "Workflow", "refs_out": 0, "refs_in": 0}, {"id": "1401637253", "name": "Bug in lookup", "type": "Workflow", "refs_out": 0, "refs_in": 0}, {"id": "191", "name": "Group Level Task Type", "type": "TaskType", "refs_out": 0, "refs_in": 0, "external": false}, {"id": "3037", "name": "226", "type": "TaskType", "refs_out": 0, "refs_in": 2, "external": false}, {"id": "3170", "name": "228", "type": "TaskType", "refs_out": 0, "refs_in": 0, "external": false}, {"id": "7236", "name": "105955- 5 - Task Type", "type": "TaskType", "refs_out": 0, "refs_in": 0, "external": false}, {"id": "8015", "name": "112942 - Task Type", "type": "TaskType", "refs_out": 0, "refs_in": 1, "external": false}];

        // Build grouped grid on load
        function buildObjectGrid() {
            const container = document.getElementById('object-grid');

            // Group by type
            const groups = {
                'Form': [],
                'Workflow': [],
                'TaskType': []
            };

            objectGridData.forEach(item => {
                if (groups[item.type]) {
                    groups[item.type].push(item);
                }
            });

            // Sort items within each group
            Object.values(groups).forEach(group => {
                group.sort((a, b) => a.name.localeCompare(b.name));
            });

            // Build unified table
            const typeLabels = {
                'Form': 'üìã Forms',
                'Workflow': '‚ö° Workflows',
                'TaskType': '‚óÜ Task Types'
            };

            let html = `
                <table>
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Type</th>
                            <th>Refs Out</th>
                            <th>Refs In</th>
                            <th>ID</th>
                        </tr>
                    </thead>
                    <tbody>
            `;

            for (const [type, items] of Object.entries(groups)) {
                if (items.length === 0) continue;

                const groupId = `group-${type.toLowerCase()}`;
                // Group header row
                html += `
                    <tr class="group-header" onclick="toggleGroup('${groupId}')">
                        <td colspan="5">
                            <span class="group-toggle" id="${groupId}-toggle">‚ñº</span>
                            ${typeLabels[type]}
                            <span class="group-count">${items.length}</span>
                        </td>
                    </tr>
                `;

                // Item rows
                items.forEach(item => {
                    const badgeClass = `type-${item.type.toLowerCase()}`;
                    const externalBadge = item.external ? '<span class="type-badge type-external">External</span>' : '';

                    html += `
                        <tr class="item-row" data-group="${groupId}" data-id="${item.id}" data-name="${item.name.toLowerCase()}" onclick="showNodeDetails('${item.id}')">
                            <td>${item.name}</td>
                            <td>
                                <span class="type-badge ${badgeClass}">${item.type}</span>
                                ${externalBadge}
                            </td>
                            <td>${item.refs_out}</td>
                            <td>${item.refs_in}</td>
                            <td style='color:#999;font-size:12px'>${item.id}</td>
                        </tr>
                    `;
                });
            }

            html += `
                    </tbody>
                </table>
            `;

            container.innerHTML = html;
        }

        // Toggle group collapse
        function toggleGroup(groupId) {
            const toggle = document.getElementById(groupId + '-toggle');
            const items = document.querySelectorAll(`tr.item-row[data-group="${groupId}"]`);

            const isCollapsed = toggle.classList.contains('collapsed');

            if (isCollapsed) {
                toggle.classList.remove('collapsed');
                items.forEach(item => item.classList.remove('hidden'));
            } else {
                toggle.classList.add('collapsed');
                items.forEach(item => item.classList.add('hidden'));
            }
        }

        // Grid filtering
        function filterGrid(query) {
            const q = query.toLowerCase();
            const items = document.querySelectorAll('tr.item-row');

            if (!q || q.length < 2) {
                // Show all items
                items.forEach(item => {
                    item.style.display = '';
                });
                return;
            }

            items.forEach(item => {
                const name = item.getAttribute('data-name');
                if (name.includes(q)) {
                    item.style.display = '';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        // Build grid on page load
        document.addEventListener('DOMContentLoaded', buildObjectGrid);

        // Show node details when clicking a table row
        function showNodeDetails(nodeId) {
            // Find node name
            const node = nodesData.find(n => n.id === nodeId);
            if (!node) return;

            // Update title
            document.getElementById('detail-title').textContent = node.label;

            // Find outgoing edges (references)
            const outgoing = edgesData.filter(e => e.from === nodeId);
            const refsOutEl = document.getElementById('refs-out');
            refsOutEl.innerHTML = '';

            if (outgoing.length === 0) {
                refsOutEl.innerHTML = '<div class="no-refs">No outgoing references</div>';
            } else {
                // Group by category
                const actions = outgoing.filter(e => e.edge_category === 'action');
                const fields = outgoing.filter(e => e.edge_category !== 'action');

                // Actions section
                if (actions.length > 0) {
                    const wrapper = document.createElement('div');
                    wrapper.style.background = '#fff8e1';
                    wrapper.style.borderLeft = '3px solid #ff9800';
                    wrapper.style.padding = '10px';
                    wrapper.style.borderRadius = '6px';
                    wrapper.style.marginBottom = '15px';
                    const header = document.createElement('h4');
                    header.textContent = 'Custom Actions';
                    header.style.color = '#e65100';
                    header.style.fontSize = '11px';
                    header.style.fontWeight = '700';
                    header.style.marginBottom = '10px';
                    header.style.textTransform = 'uppercase';
                    wrapper.appendChild(header);
                    refsOutEl.appendChild(wrapper);

                    actions.forEach(edge => {
                        const targetNode = nodesData.find(n => n.id === edge.to);
                        const li = document.createElement('li');
                        li.className = 'ref-item';

                        li.innerHTML = `
                            <span class="ref-name">${edge.action_name || targetNode?.label || edge.to}<span class="badge action">ACTION</span></span>
                            <div class="ref-meta" style="margin-top:6px;line-height:1.6">
                                <div><strong>Target:</strong> ${targetNode ? targetNode.label : edge.to}</div>
                                <div><strong>Trigger:</strong> ${formatTriggerType(edge.trigger_type)}</div>
                                <div><strong>Automatic:</strong> ${edge.automatic ? 'Yes' : 'No'}</div>
                            </div>
                        `;
                        wrapper.appendChild(li);
                    });
                }

                // Field references section
                if (fields.length > 0) {
                    const fieldWrapper = document.createElement('div');
                    fieldWrapper.style.background = '#e3f2fd';
                    fieldWrapper.style.borderLeft = '3px solid #2196f3';
                    fieldWrapper.style.padding = '10px';
                    fieldWrapper.style.borderRadius = '6px';
                    fieldWrapper.style.marginBottom = '15px';
                    const header = document.createElement('h4');
                    header.textContent = 'Field References';
                    header.style.color = '#1565c0';
                    header.style.fontSize = '11px';
                    header.style.fontWeight = '700';
                    header.style.marginBottom = '10px';
                    header.style.textTransform = 'uppercase';
                    fieldWrapper.appendChild(header);
                    refsOutEl.appendChild(fieldWrapper);

                    fields.forEach(edge => {
                        const targetNode = nodesData.find(n => n.id === edge.to);
                        const li = document.createElement('li');
                        li.className = 'ref-item';

                        li.innerHTML = `
                            <span class="ref-name">${targetNode ? targetNode.label : edge.to}</span>
                            <div class="ref-meta" style="margin-top:6px;line-height:1.6">
                                <div><strong>Type:</strong> ${getReadableType(edge)}</div>
                                <div><strong>Field:</strong> ${edge.field_name || 'N/A'}</div>
                            </div>
                        `;
                        fieldWrapper.appendChild(li);
                    });
                }
            }

            // Find incoming edges (referenced by)
            const incoming = edgesData.filter(e => e.to === nodeId);
            const refsInEl = document.getElementById('refs-in');
            refsInEl.innerHTML = '';

            if (incoming.length === 0) {
                refsInEl.innerHTML = '<div class="no-refs">No incoming references</div>';
            } else {
                // Group by category
                const actions = incoming.filter(e => e.edge_category === 'action');
                const fields = incoming.filter(e => e.edge_category !== 'action');

                // Actions section
                if (actions.length > 0) {
                    const wrapper = document.createElement('div');
                    wrapper.style.background = '#fff8e1';
                    wrapper.style.borderLeft = '3px solid #ff9800';
                    wrapper.style.padding = '10px';
                    wrapper.style.borderRadius = '6px';
                    wrapper.style.marginBottom = '15px';
                    const header = document.createElement('h4');
                    header.textContent = 'Custom Actions';
                    header.style.color = '#e65100';
                    header.style.fontSize = '11px';
                    header.style.fontWeight = '700';
                    header.style.marginBottom = '10px';
                    header.style.textTransform = 'uppercase';
                    wrapper.appendChild(header);
                    refsInEl.appendChild(wrapper);

                    actions.forEach(edge => {
                        const sourceNode = nodesData.find(n => n.id === edge.from);
                        const li = document.createElement('li');
                        li.className = 'ref-item';

                        li.innerHTML = `
                            <span class="ref-name">${edge.action_name || sourceNode?.label || edge.from}<span class="badge action">ACTION</span></span>
                            <div class="ref-meta" style="margin-top:6px;line-height:1.6">
                                <div><strong>Source:</strong> ${sourceNode ? sourceNode.label : edge.from}</div>
                                <div><strong>Trigger:</strong> ${formatTriggerType(edge.trigger_type)}</div>
                                <div><strong>Automatic:</strong> ${edge.automatic ? 'Yes' : 'No'}</div>
                            </div>
                        `;
                        wrapper.appendChild(li);
                    });
                }

                // Field references section
                if (fields.length > 0) {
                    const fieldWrapper = document.createElement('div');
                    fieldWrapper.style.background = '#e3f2fd';
                    fieldWrapper.style.borderLeft = '3px solid #2196f3';
                    fieldWrapper.style.padding = '10px';
                    fieldWrapper.style.borderRadius = '6px';
                    fieldWrapper.style.marginBottom = '15px';
                    const header = document.createElement('h4');
                    header.textContent = 'Field References';
                    header.style.color = '#1565c0';
                    header.style.fontSize = '11px';
                    header.style.fontWeight = '700';
                    header.style.marginBottom = '10px';
                    header.style.textTransform = 'uppercase';
                    fieldWrapper.appendChild(header);
                    refsInEl.appendChild(fieldWrapper);

                    fields.forEach(edge => {
                        const sourceNode = nodesData.find(n => n.id === edge.from);
                        const li = document.createElement('li');
                        li.className = 'ref-item';

                        li.innerHTML = `
                            <span class="ref-name">${sourceNode ? sourceNode.label : edge.from}</span>
                            <div class="ref-meta" style="margin-top:6px;line-height:1.6">
                                <div><strong>Type:</strong> ${getReadableType(edge)}</div>
                                <div><strong>Field:</strong> ${edge.field_name || 'N/A'}</div>
                            </div>
                        `;
                        fieldWrapper.appendChild(li);
                    });
                }
            }

            // Show panel and overlay
            document.getElementById('detail-panel').classList.add('active');
            document.getElementById('detail-overlay').classList.add('active');
        }

        // Close detail panel
        function closeDetails() {
            document.getElementById('detail-panel').classList.remove('active');
            document.getElementById('detail-overlay').classList.remove('active');
        }
    </script>
</body>
</html>